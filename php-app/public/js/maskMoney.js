!function(a){"use strict";a.browser||(a.browser={},a.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),a.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),a.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),a.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var b=0,c={destroy:function(){return a(this).unbind(".maskMoney"),a.browser.msie&&(this.onpaste=null),this},mask:function(b){return this.each(function(){var d,c=a(this);return"number"==typeof b&&(c.trigger("mask"),d=a(c.val().split(/\D/)).last()[0].length,b=b.toFixed(d),c.val(b)),c.trigger("mask")})},unmasked:function(){return this.map(function(){var b=a(this).val()||"0",c=b.indexOf("-")!==-1;return b=b.replace(/[^0-9.]/g,""),c&&(b="-"+b),parseFloat(b)})},init:function(c){return c=a.extend({prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1},c),this.each(function(){function f(){var e,f,g,h,i,a=d.get(0),b=0,c=0;return"number"==typeof a.selectionStart&&"number"==typeof a.selectionEnd?(b=a.selectionStart,c=a.selectionEnd):(f=document.selection.createRange(),f&&f.parentElement()===a&&(h=a.value.length,e=a.value.replace(/\r\n/g,"\n"),g=a.createTextRange(),g.moveToBookmark(f.getBookmark()),i=a.createTextRange(),i.collapse(!1),g.compareEndPoints("StartToEnd",i)>-1?b=c=h:(b=-g.moveStart("character",-h),b+=e.slice(0,b).split("\n").length-1,g.compareEndPoints("EndToEnd",i)>-1?c=h:(c=-g.moveEnd("character",-h),c+=e.slice(0,c).split("\n").length-1)))),{start:b,end:c}}function g(){var a=!(d.val().length>=d.attr("maxlength")&&d.attr("maxlength")>=0),b=f(),c=b.start,e=b.end,g=!(b.start===b.end||!d.val().substring(c,e).match(/\d/)),h="0"===d.val().substring(0,1);return a||g||h}function h(a){d.each(function(b,c){if(c.setSelectionRange)c.focus(),c.setSelectionRange(a,a);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",a),d.moveStart("character",a),d.select()}})}function i(a){var b="";return a.indexOf("-")>-1&&(a=a.replace("-",""),b="-"),b+c.prefix+a+c.suffix}function j(a){var e,f,b=a.indexOf("-")>-1&&c.allowNegative?"-":"",d=a.replace(/[^0-9.]/g,""),g=d.indexOf("."),h=g!==-1?d.slice(0,g):d;return h=h.replace(/^0*/g,""),h=h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,c.thousands),""===h&&(h="0"),e=b+h,g>-1&&(f=d.slice(g+1),f=f.indexOf(".")>-1?f.toString().replace(".",""):f,e+=c.decimal+f),i(e)}function k(a){var c,b=d.val().length;d.val(j(d.val())),c=d.val().length,a-=b-c,h(a)}function l(a){var b=d.val();if(a){var c=b.replace(/[^0-9.]/g,""),e=c.length;d.attr("data-character",e)}d.val(j(b))}function m(){var a=d.val();return c.allowNegative?""!==a&&"-"===a.charAt(0)?a.replace("-",""):"-"+a:a}function n(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function o(c){c=c||window.event;var h,i,j,l,o,e=c.which||c.charCode||c.keyCode;if(void 0===e)return!1;if(b=d.attr("data-character")?d.attr("data-character"):0,e<48||e>57)return 45===e?(d.val(m()),!1):43===e?(d.val(d.val().replace("-","")),!1):46===e?(o=d.val(),o.indexOf(".")===-1?(d.attr("data-character",++b),!0):(d.val(d.val()),!1)):13===e||9===e||(!a.browser.mozilla||37!==e&&39!==e||0!==c.charCode?(n(c),d.attr("data-character",++b),!0):(d.attr("data-character",++b),!0));if(g()){n(c),h=String.fromCharCode(e),i=f(),j=i.start,l=i.end,o=d.val();var p=o.replace(/[^0-9.]/g,"");return d.val(o.substring(0,j)+h+o.substring(l,o.length)),k(j+1),1==d.attr("data-character")&&0==p&&h==p?"":d.attr("data-character",++b),!1}return!1}function p(a){a=a||window.event;var g,h,i,j,l,e=a.which||a.charCode||a.keyCode;return void 0!==e&&(g=f(),h=g.start,i=g.end,8!==e&&46!==e&&63272!==e||(n(a),j=d.val(),b=d.attr("data-character"),b>=1&&d.attr("data-character",--b),h===i&&(8===e?""===c.suffix?h-=1:(l=j.split("").reverse().join("").search(/\d/),h=j.length-l-1,i=h+1):i+=1),d.val(j.substring(0,h)+j.substring(i,j.length)),k(h),!1))}function q(){e=d.val(),l(!1);var b,a=d.get(0);a.createTextRange&&(b=a.createTextRange(),b.collapse(!1),b.select())}function r(){setTimeout(function(){l()},0)}function s(){var a=parseFloat("0")/Math.pow(10,c.precision);return a.toFixed(0).replace(new RegExp("\\.","g"),c.decimal)}function t(b){if(a.browser.msie&&o(b),""===d.val()||d.val()===i(s()))!c.allowZero||!d.attr("data-character")||d.attr("data-character")<1?d.val(""):c.affixesStay?d.val(i(s())):d.val(s());else if(!c.affixesStay){var f=d.val().replace(c.prefix,"").replace(c.suffix,"");d.val(f)}d.val()!==e&&d.change()}var e,d=a(this);c=a.extend(c,d.data()),d.unbind(".maskMoney"),d.bind("keypress.maskMoney",o),d.bind("keydown.maskMoney",p),d.bind("blur.maskMoney",t),d.bind("focus.maskMoney",q),d.bind("cut.maskMoney",r),d.bind("paste.maskMoney",r),d.bind("mask.maskMoney",l)})}};a.fn.maskMoney=function(b){return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.maskMoney"):c.init.apply(this,arguments)}}(window.jQuery||window.Zepto);